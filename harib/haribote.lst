GAS LISTING haribote.s 			page 1


   1              	    .code16
   2              	
   3              	    # BOOT_INFO
   4              	    .set CYLS, 0x0ff0
   5              	    .set LEDS, 0x0ff1
   6              	    .set VMODE, 0x0ff2 # bit color
   7              	    .set SCRNX, 0x0ff4 # resolution X
   8              	    .set SCRNY, 0x0ff6 # resolution Y
   9              	    .set VRAM, 0x0ff8 # start of graphic buffer
  10              	
  11 0000 B400     	    mov $0x00, %ah # AT BIOS: ビデオモード設定
  12 0002 B013     	    mov $0x13, %al # mode: VGA 320x200 8bit color packed pixel (?)
  13 0004 CD10     	    int $0x10
  14              	
  15              	    # set video configs to BOOT_INFO
  16 0006 C606F20F 	    movb $8, VMODE
  16      08
  17 000b C706F40F 	    movw $320, SCRNX
  17      4001
  18 0011 C706F60F 	    movw $200, SCRNY
  18      C800
  19 0017 66C706F8 	    movl $0x000a0000, VRAM
  19      0F00000A 
  19      00
  20              	
  21              	    # get keyboard state from BIOS
  22 0020 B402     	    mov $0x02, %ah
  23 0022 CD16     	    int $0x16
  24 0024 A2F10F   	    mov %al, LEDS
  25              	
  26              	fin:
  27 0027 F4       	    hlt
  28 0028 EBFD     	    jmp fin
GAS LISTING haribote.s 			page 2


DEFINED SYMBOLS
          haribote.s:4      *ABS*:0000000000000ff0 CYLS
          haribote.s:5      *ABS*:0000000000000ff1 LEDS
          haribote.s:6      *ABS*:0000000000000ff2 VMODE
          haribote.s:7      *ABS*:0000000000000ff4 SCRNX
          haribote.s:8      *ABS*:0000000000000ff6 SCRNY
          haribote.s:9      *ABS*:0000000000000ff8 VRAM
          haribote.s:26     .text:0000000000000027 fin

NO UNDEFINED SYMBOLS
